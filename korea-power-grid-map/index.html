<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MK5KR6Q29Z"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-MK5KR6Q29Z');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대한민국 전력 송전망 지도</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="app-header">
        <h1 class="app-title">
            <span class="title-icon">&#9889;</span>
            대한민국 전력 송전망 지도
        </h1>
        <div class="header-controls">
            <button id="darkModeBtn" class="header-btn" title="다크모드 전환">
                <span class="btn-icon">&#9790;</span>
                <span class="btn-text">다크모드</span>
            </button>
            <button id="sidebarToggleBtn" class="header-btn" title="패널 토글">
                <span class="btn-icon">&#9776;</span>
                <span class="btn-text">패널</span>
            </button>
        </div>
    </header>

    <!-- Main -->
    <main class="app-main">
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar open">
            <div class="sidebar-section">
                <h2 class="sidebar-heading">레이어 제어</h2>
                <div id="layerControls" class="layer-controls"></div>
            </div>

            <div class="sidebar-section">
                <h2 class="sidebar-heading">범례</h2>
                <div id="legend" class="legend"></div>
            </div>

            <div class="sidebar-section">
                <h2 class="sidebar-heading">송전망 통계</h2>
                <div id="statsPanel" class="stats-panel"></div>
            </div>

            <div class="sidebar-section">
                <h2 class="sidebar-heading">검색</h2>
                <input type="text" id="searchInput" class="search-input"
                       placeholder="변전소 또는 발전소 검색...">
                <div id="searchResults" class="search-results"></div>
            </div>

            <div class="sidebar-section sidebar-disclaimer">
                <p>본 지도는 교육 및 참고 목적으로 제작되었으며, 송전선로 경로 및 시설물 위치는 공개된 자료를 기반으로 한 대략적인 표현입니다.</p>
                <p class="data-source">데이터 출처: KEPCO 공개자료, 공공데이터포털, KPX</p>
            </div>
        </aside>

        <!-- Map -->
        <div id="map" class="map-container"></div>
    </main>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>지도 데이터 로딩 중...</p>
    </div>

    <!-- API Key Missing Message -->
    <div id="apiKeyMessage" class="api-key-message" style="display:none;">
        <div class="api-key-box">
            <h2>Kakao Maps API 키 설정 필요</h2>
            <p>이 애플리케이션을 사용하려면 Kakao Maps API 키가 필요합니다.</p>
            <ol>
                <li><a href="https://developers.kakao.com" target="_blank">Kakao Developers</a>에서 앱을 생성하세요.</li>
                <li>JavaScript 앱 키를 복사하세요.</li>
                <li><code>index.html</code>의 <code>YOUR_KAKAO_APP_KEY</code>를 발급받은 키로 교체하세요.</li>
            </ol>
        </div>
    </div>

    <!-- Scripts -->
    <script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=YOUR_KAKAO_APP_KEY&libraries=services,clusterer&autoload=false">
    </script>
    <script src="js/data.js"></script>
    <script src="js/map.js"></script>
    <script src="js/popup.js"></script>
    <script src="js/layers.js"></script>
    <script src="js/sidebar.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
